import styles from "./Overview.module.css";

import { Database } from "@/lib/supabase";
import { createServerComponentClient } from "@supabase/auth-helpers-nextjs";
import { redirect } from "next/navigation";
import { cookies } from "next/headers";
import { getPrenumerationer } from "@/lib/Prenumerationer";
import Link from "next/link";
import Kategori from "@/components/Kategori/Kategori";

export default async function Överblick() {
  const supabase = createServerComponentClient<Database>({ cookies });
  const {
    data: { session },
  } = await supabase.auth.getSession();

  /* Redirect if not login */
  if (!session) {
    redirect('/login');
  }

  /* Get the cache data */
  const prenumerationer = await getPrenumerationer();

  return (
    <>
      <h1 className="h1 text-black">Överblick</h1>

      <div className={styles.grid}>
        <section className={`${styles.overviewSection} ${styles.gridFull} bg-white`}>
          <h2 className="h2 font-weight-bold text-accent">Sammanfattning</h2>
          <ul>
            <li>
              <h3 className="h3">Antal prenumerationer</h3>
              <p className="h2">12st</p>
            </li>
            <li>
              <h3 className="h3">Total Månadskotnad</h3>
              <p className="h2">12kr</p>
            </li>
            <li>
              <h3 className="h3">Total årskostnad</h3>
              <p className="h2">12kr</p>
            </li>
          </ul>
        </section>
        <section className={`${styles.topRating} ${styles.gridFull} bg-white`}>
          <Link className="h3 text-accent" href={'#'}>Sveriges topp 5 prenumerationer</Link>
        </section>

        <Kategori />

        <section className={`${styles.sparaSection} ${styles.smallCardGrid} bg-white`}>
          <h2 className="h3">Skapa sparplan</h2>
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
            <path d="M18 7.71429H10.2857V0H7.71429V7.71429H0V10.2857H7.71429V18H10.2857V10.2857H18V7.71429Z" fill="black" />
          </svg>
          <svg className={styles.pig} xmlns="http://www.w3.org/2000/svg" width="73" height="72" viewBox="0 0 73 72" fill="none">
            <g clip-path="url(#clip0_422_1063)">
              <path d="M39.9392 20.94C35.7172 20.115 31.3492 20.4749 27.3192 21.98C27.1235 22.0574 26.945 22.1727 26.7939 22.3192C26.6428 22.4656 26.522 22.6404 26.4384 22.8336C26.2696 23.2236 26.2627 23.6648 26.4192 24.06C26.5757 24.4551 26.8827 24.772 27.2728 24.9407C27.6629 25.1095 28.104 25.1164 28.4992 24.96C31.9691 23.648 35.7331 23.3158 39.3792 24C39.5929 24.0562 39.816 24.0676 40.0343 24.0333C40.2527 23.9991 40.4615 23.92 40.6478 23.801C40.834 23.682 40.9936 23.5257 41.1165 23.342C41.2393 23.1583 41.3228 22.9511 41.3616 22.7336C41.4004 22.516 41.3937 22.2927 41.3419 22.0779C41.2901 21.863 41.1944 21.6612 41.0608 21.4852C40.9272 21.3092 40.7585 21.1627 40.5655 21.0551C40.3724 20.9475 40.1592 20.8811 39.9392 20.86V20.94Z" fill="#0043CA" />
              <path d="M51.2591 36.14C52.7613 36.14 53.9791 34.9223 53.9791 33.42C53.9791 31.9178 52.7613 30.7 51.2591 30.7C49.7568 30.7 48.5391 31.9178 48.5391 33.42C48.5391 34.9223 49.7568 36.14 51.2591 36.14Z" fill="#0043CA" />
              <path d="M71.5202 37.26C71.3349 36.9858 71.0844 36.7618 70.7912 36.6082C70.498 36.4547 70.1712 36.3762 69.8402 36.38C68.2244 36.1557 66.7419 35.3613 65.6602 34.14C63.5788 31.865 61.8099 29.3226 60.4002 26.58L66.1602 17.58C66.5098 17.0585 66.7239 16.4581 66.7832 15.8331C66.8426 15.208 66.7453 14.5781 66.5002 14C66.2548 13.4742 65.8838 13.0167 65.4199 12.668C64.9561 12.3192 64.4136 12.0898 63.8402 12C60.1773 11.5064 56.4492 12.0252 53.0602 13.5C51.118 14.3555 49.2905 15.4507 47.6202 16.76C44.349 15.2932 40.8657 14.3549 37.3002 13.98C23.1202 12.6 10.1602 21.8 8.50024 34C7.85331 33.709 7.27391 33.2867 6.7988 32.76C6.32368 32.2332 5.96321 31.6135 5.74024 30.94C5.59764 30.4783 5.54895 29.9926 5.59704 29.5117C5.64513 29.0308 5.78902 28.5644 6.02024 28.14C6.22759 27.7837 6.52393 27.4874 6.88024 27.28C7.12319 27.133 7.33478 26.9395 7.50295 26.7106C7.67112 26.4818 7.79256 26.222 7.86035 25.9462C7.92813 25.6704 7.94094 25.384 7.89802 25.1033C7.85511 24.8225 7.75732 24.553 7.61024 24.31C7.46316 24.0671 7.26967 23.8555 7.04081 23.6873C6.81196 23.5192 6.55222 23.3977 6.27643 23.3299C6.00064 23.2621 5.7142 23.2493 5.43346 23.2923C5.15272 23.3352 4.88319 23.433 4.64024 23.58C3.67208 24.1743 2.87313 25.0077 2.32024 26C1.80621 26.9314 1.48307 27.9559 1.36975 29.0136C1.25642 30.0713 1.35518 31.141 1.66024 32.16C2.03574 33.3949 2.65843 34.5406 3.49047 35.5273C4.32251 36.5141 5.34651 37.3214 6.50024 37.9L8.34024 38.82C8.57011 43.6886 9.80967 48.4561 11.9802 52.82L12.3202 53.58C14.0549 57.2488 16.2675 60.6718 18.9002 63.76C19.0877 63.9734 19.3184 64.1444 19.577 64.2616C19.8356 64.3789 20.1163 64.4397 20.4002 64.44H29.4402C29.7678 64.4384 30.09 64.3563 30.3784 64.2011C30.6668 64.0458 30.9127 63.822 31.0944 63.5495C31.2761 63.2769 31.3881 62.9639 31.4205 62.6379C31.4529 62.312 31.4047 61.983 31.2802 61.68L30.5002 59.88L32.8602 60.14C35.5204 60.403 38.2001 60.403 40.8602 60.14C41.6002 61.34 42.4002 62.54 43.2802 63.72C43.4644 63.9721 43.7051 64.1776 43.9829 64.32C44.2607 64.4624 44.5681 64.5377 44.8802 64.54H53.5602C53.8903 64.5398 54.2152 64.4578 54.506 64.3014C54.7967 64.1451 55.0442 63.9192 55.2264 63.6439C55.4086 63.3686 55.5198 63.0525 55.5501 62.7238C55.5805 62.3951 55.529 62.064 55.4002 61.76C55.0602 60.96 54.7202 60.1 54.4602 59.36C54.1002 58.3 53.8202 57.36 53.6002 56.46C55.809 55.2676 57.8362 53.7658 59.6202 52C61.613 52.2409 63.6275 52.2409 65.6202 52C65.966 51.9478 66.292 51.8057 66.5657 51.5882C66.8394 51.3706 67.0513 51.0851 67.1802 50.76L71.7002 39.14C71.8274 38.8361 71.8775 38.5054 71.8461 38.1775C71.8147 37.8495 71.7028 37.5343 71.5202 37.26ZM63.9602 48.14C62.3902 48.2294 60.8151 48.1557 59.2602 47.92C57.4897 47.621 55.7803 47.0331 54.2002 46.18C53.7323 45.948 53.1922 45.9082 52.6953 46.0692C52.1984 46.2302 51.7842 46.5792 51.5413 47.0416C51.2983 47.504 51.2459 48.043 51.3952 48.5436C51.5445 49.0441 51.8837 49.4663 52.3402 49.72C53.1761 50.1583 54.0377 50.5457 54.9202 50.88C53.8296 51.8112 52.6188 52.5915 51.3202 53.2L49.2002 54.16C49.2002 54.16 50.1802 58.54 50.8402 60.48H46.0802C45.6002 59.8 43.1802 55.76 43.1802 55.76L41.8402 55.94C39.0255 56.3459 36.1734 56.4264 33.3402 56.18C32.0202 56.06 29.8202 55.78 28.1002 55.48L25.0002 54.94C25.0002 54.94 26.2602 59.8 26.5002 60.42H21.3402C19.2325 57.8392 17.446 55.0118 16.0202 52L15.6602 51.22C13.0616 46.2179 11.9643 40.5713 12.5002 34.96C13.5802 24.58 24.7402 16.74 36.8802 17.88C40.4118 18.2759 43.8487 19.2772 47.0402 20.84L48.2802 21.42L49.2802 20.48C50.8376 19.0884 52.5978 17.9419 54.5002 17.08C57.0173 15.9883 59.767 15.5415 62.5002 15.78L55.7402 26.36L56.2402 27.36C57.987 30.8783 60.215 34.1362 62.8602 37.04C64.0889 38.2408 65.5437 39.1857 67.1402 39.82L63.9602 48.14Z" fill="#0043CA" />
            </g>
            <defs>
              <clipPath id="clip0_422_1063">
                <rect width="72" height="72" fill="white" transform="translate(0.5)" />
              </clipPath>
            </defs>
          </svg>
        </section>

        <section className={`${styles.månadskostnad} ${styles.smallCardGrid} bg-white`}>
          <h2 className="h3">Månadskostnad i morötter</h2>
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
            <path d="M5.75 4.46374C4.7875 5.23375 4.0217 6.18329 3.4526 7.3124C2.8835 8.44149 2.5993 9.67069 2.6 11C2.6 13.0125 3.2125 14.767 4.4375 16.2636C5.6625 17.7602 7.21125 18.7269 9.08375 19.1637C9.34625 19.2337 9.55625 19.387 9.71375 19.6236C9.87125 19.8602 9.95 20.1182 9.95 20.3975C9.95 20.6775 9.85375 20.9137 9.66125 21.1062C9.46875 21.2987 9.25 21.3687 9.005 21.3162C6.555 20.8612 4.525 19.6758 2.915 17.7599C1.305 15.844 0.5 13.5907 0.5 11C0.5 9.40749 0.81955 7.9375 1.45865 6.59C2.09775 5.2425 2.9682 4.08749 4.07 3.12499H2.6C2.3025 3.12499 2.05295 3.02419 1.85135 2.82259C1.64975 2.62099 1.5493 2.3718 1.55 2.075C1.55 1.7775 1.6508 1.52795 1.8524 1.32635C2.054 1.12475 2.3032 1.0243 2.6 1.025H6.8C7.0975 1.025 7.34705 1.1258 7.54865 1.3274C7.75025 1.529 7.8507 1.7782 7.85 2.075V6.27499C7.85 6.57249 7.7492 6.82205 7.5476 7.02365C7.346 7.22525 7.0968 7.3257 6.8 7.325C6.5025 7.325 6.25295 7.2242 6.05135 7.02259C5.84975 6.82099 5.7493 6.57179 5.75 6.27499V4.46374ZM17.93 18.875H19.4C19.6975 18.875 19.947 18.9758 20.1486 19.1774C20.3502 19.379 20.4507 19.6282 20.45 19.925C20.45 20.2225 20.3492 20.472 20.1476 20.6736C19.946 20.8752 19.6968 20.9757 19.4 20.975H15.2C14.9025 20.975 14.6529 20.8742 14.4513 20.6726C14.2497 20.471 14.1493 20.2218 14.15 19.925V15.725C14.15 15.4275 14.2508 15.1779 14.4524 14.9763C14.654 14.7747 14.9032 14.6743 15.2 14.675C15.4975 14.675 15.747 14.7758 15.9486 14.9774C16.1502 15.179 16.2507 15.4282 16.25 15.725V17.5362C17.2125 16.7487 17.9783 15.795 18.5474 14.675C19.1165 13.555 19.4007 12.33 19.4 11C19.4 8.98749 18.7875 7.23294 17.5625 5.73635C16.3375 4.23975 14.7887 3.27304 12.9162 2.83624C12.6537 2.76624 12.4437 2.6133 12.2863 2.3774C12.1287 2.1415 12.05 1.8832 12.05 1.6025C12.05 1.3225 12.1462 1.08625 12.3387 0.893745C12.5312 0.701245 12.75 0.631245 12.995 0.683745C15.445 1.13875 17.475 2.32455 19.085 4.24115C20.695 6.15774 21.5 8.41069 21.5 11C21.5 12.5925 21.1804 14.0625 20.5413 15.41C19.9022 16.7575 19.0318 17.9125 17.93 18.875Z" fill="black" />
          </svg>
          <p className="h1">521kg</p>
          <svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" viewBox="0 0 56 56" fill="none">
            <path d="M52.9999 12H48.2499L53.1274 7.1225C53.4065 6.84344 53.6278 6.51215 53.7789 6.14754C53.9299 5.78293 54.0076 5.39215 54.0076 4.9975C54.0076 4.60285 53.9299 4.21207 53.7789 3.84746C53.6278 3.48285 53.4065 3.15156 53.1274 2.8725C52.8483 2.59344 52.5171 2.37208 52.1524 2.22105C51.7878 2.07003 51.3971 1.9923 51.0024 1.9923C50.6078 1.9923 50.217 2.07003 49.8524 2.22105C49.4878 2.37208 49.1565 2.59344 48.8774 2.8725L43.9999 7.75V3C43.9999 2.20435 43.6838 1.44129 43.1212 0.87868C42.5586 0.316071 41.7956 0 40.9999 0C40.2043 0 39.4412 0.316071 38.8786 0.87868C38.316 1.44129 37.9999 2.20435 37.9999 3V9.5C34.8551 8.08193 31.3533 7.65416 27.9597 8.2735C24.566 8.89285 21.441 10.53 18.9999 12.9675C8.86241 22.92 1.29491 46.25 0.444906 48.9425C0.101152 49.7039 -0.046364 50.5392 0.0158317 51.3723C0.0780275 52.2053 0.347953 53.0095 0.800952 53.7114C1.25395 54.4133 1.87559 54.9904 2.60908 55.3902C3.34257 55.79 4.16454 55.9997 4.99991 56C5.71029 55.9988 6.41237 55.8471 7.05991 55.555C8.96991 54.95 21.2574 50.97 31.7874 45.1L31.9224 45.025C36.1974 42.6325 40.1724 39.9275 43.0324 37.025C45.4751 34.5818 47.1154 31.4524 47.7349 28.0536C48.3544 24.6548 47.9236 21.1479 46.4999 18H52.9999C53.7956 18 54.5586 17.6839 55.1212 17.1213C55.6838 16.5587 55.9999 15.7956 55.9999 15C55.9999 14.2044 55.6838 13.4413 55.1212 12.8787C54.5586 12.3161 53.7956 12 52.9999 12ZM38.7774 32.78L38.7549 32.8025C36.7274 34.8725 33.9774 36.8525 30.9224 38.6825L25.1199 32.88C24.5563 32.3164 23.7919 31.9998 22.9949 31.9998C22.1979 31.9998 21.4335 32.3164 20.8699 32.88C20.3063 33.4436 19.9897 34.208 19.9897 35.005C19.9897 35.802 20.3063 36.5664 20.8699 37.13L25.4249 41.685C17.8524 45.4775 9.89241 48.29 6.60991 49.39C8.30241 44.335 14.0574 28.19 21.1949 19.455L28.8699 27.13C29.4335 27.6936 30.1979 28.0102 30.9949 28.0102C31.7919 28.0102 32.5563 27.6936 33.1199 27.13C33.6835 26.5664 34.0001 25.802 34.0001 25.005C34.0001 24.208 33.6835 23.4436 33.1199 22.88L25.6349 15.395C27.9535 14.0974 30.6634 13.6828 33.2639 14.2279C35.8644 14.773 38.1797 16.2409 39.782 18.3604C41.3843 20.4799 42.1652 23.1078 41.9806 25.7584C41.7959 28.409 40.6581 30.9031 38.7774 32.78Z" fill="#0043CA" />
          </svg>
        </section>
      </div>
    </>
  )

}